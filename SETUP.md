# Инструкция по запуску приложения

## Описание
Проект состоит из двух частей:
- **Backend (myserver/)** - FastAPI сервер с REST API (порт 8001)
- **Frontend (frontend/)** - WSGI сервер с шаблонами (порт 8000)

## Установка зависимостей
```bash
pip install -r requirements.txt
```

## Запуск

### 1. Запустить Backend сервер (в первом терминале):
```bash
cd myserver
python server.py
```
Сервер запустится на `http://localhost:8001`

### 2. Запустить Frontend сервер (во втором терминале):
```bash
cd frontend
python router.py
```
Сервер запустится на `http://localhost:8000`

### 3. Открыть в браузере:
```
http://localhost:8000
```

## Тестирование API

Запустите тестовый скрипт для проверки API:
```bash
python test_api.py
```

## Структура API эндпоинтов

### Аутентификация
- `POST /register` - Регистрация пользователя
- `POST /login` - Вход пользователя

### Заметки
- `GET /get_all_notes/{user_id}` - Получить все заметки пользователя
- `GET /get_note/{note_id}` - Получить заметку по ID
- `POST /add_note` - Добавить новую заметку
- `PUT /update_note` - Обновить заметку
- `DELETE /delete_note/{note_id}` - Удалить заметку

## Frontend маршруты

- `/` или `/index` - Главная страница
- `/auth/register` - Страница регистрации
- `/auth/login` - Страница входа
- `/notes` - Список заметок пользователя
- `/notes/new` - Создание новой заметки
- `/notes/{id}` - Просмотр заметки
- `/notes/{id}/edit` - Редактирование заметки
- `/notes/{id}/delete` - Удаление заметки (POST)

## Исправленные проблемы

1. ✅ Исправлен SQL синтаксис (добавлена запятая после `password`)
2. ✅ Изменены HTTP методы на правильные (POST для регистрации/входа)
3. ✅ Исправлен возврат ошибок через HTTPException
4. ✅ Исправлен SQL запрос в `update_note` (обновление `notes` вместо `users`)
5. ✅ Изменен порт сервера на 8001 (frontend на 8000)
6. ✅ Добавлена CORS поддержка
7. ✅ Реализованы httpx запросы от фронтенда к серверу
8. ✅ Исправлены модели (id опциональный, tags строка)
9. ✅ Исправлен метод `read_notes_by_user` (возвращает все заметки)
10. ✅ Добавлены параметры пути для GET запросов

## База данных

База данных SQLite создается автоматически при первом запуске сервера в файле `database.db` в папке `myserver/`.
